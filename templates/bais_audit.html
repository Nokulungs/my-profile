{% extends 'layout.html' %}

{% block title %}Bias Audit: Credit Scoring{% endblock %}

{% block content %}
<section class="project-detail-section">
    <h2>Bias Audit Report: Financial Credit Scoring ‚öñÔ∏è</h2>
    <p class="project-subtitle">Developed by HerTech Hive | Fairness Analysis for Automated Lending Algorithms</p>

    <!-- Overview -->
    <h3>Project Overview</h3>
    <div class="project-overview">
        <p>
            This comprehensive bias audit and mitigation framework investigates age-based discrimination in financial credit scoring models. 
            Automated lending algorithms can inadvertently inherit historical biases, leading to "Disparate Impact" on protected demographic groups.
            This project identifies these patterns, validates them statistically, and implements technical interventions to align models with Responsible AI principles.
        </p>
        <div class="alert-box">
            <strong>üìå Key Finding:</strong> Analysis reveals that applicants under 25 face statistically significant disadvantages in automated credit approval systems.
        </div>
    </div>

    <!-- Tech stack -->
    <h3>Technologies & Tools</h3>
    <div class="project-tech">
        <span class="tech-tag">Python</span>
        <span class="tech-tag">Jupyter</span>
        <span class="tech-tag">Scikit-learn</span>
        <span class="tech-tag">Pandas</span>
        <span class="tech-tag">NumPy</span>
        <span class="tech-tag">Matplotlib</span>
        <span class="tech-tag">Seaborn</span>
        <span class="tech-tag">SciPy</span>
        <span class="tech-tag">Statistical Analysis</span>
    </div>

    <!-- Key Objectives -->
    <h3>Objectives & Goals</h3>
    <div class="objectives-grid">
        <div class="objective-card">
            <div class="objective-icon">üîç</div>
            <h4>Identify Bias Patterns</h4>
            <p>Analyze correlation between age and credit approval outcomes</p>
        </div>
        <div class="objective-card">
            <div class="objective-icon">üìä</div>
            <h4>Quantitative Audit</h4>
            <p>Compute fairness metrics (Selection Rate, False Negative Rate, Demographic Parity)</p>
        </div>
        <div class="objective-card">
            <div class="objective-icon">üìà</div>
            <h4>Statistical Validation</h4>
            <p>Use Chi-Squared testing to prove significance of discovered biases</p>
        </div>
        <div class="objective-card">
            <div class="objective-icon">‚öñÔ∏è</div>
            <h4>Bias Mitigation</h4>
            <p>Apply Reweighing and Threshold Moving strategies for equitable lending</p>
        </div>
    </div>

    <!-- Dataset Summary -->
    <h3>Dataset Analysis</h3>
    <div class="dataset-info">
        <div class="dataset-stats">
            <div class="stat-item">
                <span class="stat-label">Protected Attribute</span>
                <span class="stat-value">Age (Young < 25 vs. Mature 25+)</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Target Variable</span>
                <span class="stat-value">Credit Score ("Good" vs. "Standard/Poor")</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Key Features</span>
                <span class="stat-value">Annual Income, Monthly Salary, Bank Accounts, Credit History</span>
            </div>
        </div>
    </div>

    <!-- Audit Methodology -->
    <h3>Audit Methodology</h3>
    <div class="methodology-timeline">
        <div class="phase">
            <div class="phase-header">
                <span class="phase-number">Phase 1</span>
                <h4>Bias Detection</h4>
            </div>
            <div class="phase-content">
                <div class="method-item">
                    <strong>Proxy Analysis</strong>
                    <p>Checking if features like "Number of Credit Cards" secretly act as proxies for Age</p>
                </div>
                <div class="method-item">
                    <strong>Disparate Impact Ratio</strong>
                    <p>Calculating approval rate ratios between age groups (threshold: 0.80)</p>
                </div>
                <div class="method-item">
                    <strong>Intersectional Analysis</strong>
                    <p>Examining how Age interacts with Job Type to create "double disadvantage"</p>
                </div>
                <div class="method-item">
                    <strong>Temporal & Sampling Bias</strong>
                    <p>Ensuring data isn't skewed by specific collection periods</p>
                </div>
            </div>
        </div>

        <div class="phase">
            <div class="phase-header">
                <span class="phase-number">Phase 2</span>
                <h4>Mitigation Strategies</h4>
            </div>
            <div class="phase-content">
                <div class="method-item">
                    <strong>Reweighing (Pre-processing)</strong>
                    <p>Assigning higher weights to underrepresented positive outcomes in "Young" group during training</p>
                </div>
                <div class="method-item">
                    <strong>Threshold Moving (Post-processing)</strong>
                    <p>Adjusting classification thresholds for different age groups to equalize opportunity</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Key Results -->
    <h3>Key Results & Metrics</h3>
    <div class="results-table">
        <table>
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Baseline Model</th>
                    <th>Mitigated (Reweighing)</th>
                    <th>Mitigated (Threshold)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Disparate Impact Ratio</td>
                    <td class="bad-result">Detected < 0.8</td>
                    <td class="good-result">Improved</td>
                    <td class="good-result">Optimized</td>
                </tr>
                <tr>
                    <td>Statistical Significance</td>
                    <td class="bad-result">p < 0.05</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>Selection Rate Gap</td>
                    <td class="bad-result">15.2%</td>
                    <td class="good-result">4.8%</td>
                    <td class="good-result">2.1%</td>
                </tr>
                <tr>
                    <td>False Negative Rate (Young)</td>
                    <td class="bad-result">32%</td>
                    <td class="good-result">22%</td>
                    <td class="good-result">18%</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Fairness Visualization -->
    <h3>Fairness Analysis Visualization</h3>
    <div class="visualization">
        <div class="viz-item">
            <div class="viz-title">Disparate Impact Ratio</div>
            <div class="viz-bar">
                <div class="bar-segment baseline" style="width: 65%">
                    <span>Baseline: 65%</span>
                </div>
                <div class="bar-segment reweight" style="width: 78%">
                    <span>Reweight: 78%</span>
                </div>
                <div class="bar-segment threshold" style="width: 95%">
                    <span>Threshold: 95%</span>
                </div>
                <div class="fairness-line" style="left: 80%">
                    <span>Fairness Threshold (80%)</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Implementation Guide -->
    <h3>How to Use</h3>
    <div class="implementation-guide">
        <div class="step">
            <span class="step-number">1</span>
            <div class="step-content">
                <h4>Environment Setup</h4>
                <pre><code>pip install pandas numpy matplotlib seaborn scipy scikit-learn jupyter</code></pre>
            </div>
        </div>
        <div class="step">
            <span class="step-number">2</span>
            <div class="step-content">
                <h4>Data Preparation</h4>
                <p>Place <code>credit_score_cleaned_train.csv</code> in the root directory</p>
            </div>
        </div>
        <div class="step">
            <span class="step-number">3</span>
            <div class="step-content">
                <h4>Run Audit</h4>
                <p>Execute notebook sections sequentially to generate bias report and apply fixes</p>
            </div>
        </div>
    </div>

    <!-- Ethical Recommendations -->
    <h3>Ethical Recommendations</h3>
    <div class="recommendations">
        <div class="recommendation-card">
            <div class="rec-icon">üìÖ</div>
            <div class="rec-content">
                <h4>Continuous Monitoring</h4>
                <p>Fairness is not a one-time check; models should be audited quarterly with updated data</p>
            </div>
        </div>
        <div class="recommendation-card">
            <div class="rec-icon">üë•</div>
            <div class="rec-content">
                <h4>Human-in-the-Loop</h4>
                <p>Automated denials for "Young" applicants should be subject to manual review in borderline cases</p>
            </div>
        </div>
        <div class="recommendation-card">
            <div class="rec-icon">üîç</div>
            <div class="rec-content">
                <h4>Transparency & Reporting</h4>
                <p>Stakeholders should receive regular "Disparate Impact" reports generated by this auditing framework</p>
            </div>
        </div>
    </div>

    <!-- Links -->
    <div class="project-links">
        <a href="https://github.com/Nokulungs/Bias-Audit-" target="_blank" class="project-link">
            <i class="bi bi-github"></i> View on GitHub
        </a>
        <a href="/projects" class="project-link secondary">
            <i class="bi bi-arrow-left"></i> Back to Projects
        </a>
    </div>
</section>

<style>
    .project-detail-section {
        padding: 20px;
        max-width: 900px;
        margin: auto;
        color: #2e2e2e;
        font-family: 'Segoe UI', sans-serif;
        line-height: 1.6;
    }

    .project-detail-section h2 {
        color: #2c3e50;
        border-bottom: 3px solid #e74c3c;
        padding-bottom: 10px;
        margin-bottom: 15px;
    }

    .project-subtitle {
        color: #7f8c8d;
        font-style: italic;
        margin-bottom: 30px;
        font-size: 1.1em;
    }

    .project-detail-section h3 {
        color: #34495e;
        margin-top: 40px;
        margin-bottom: 20px;
        padding-left: 10px;
        border-left: 4px solid #e74c3c;
    }

    .project-overview {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 25px;
        border-left: 5px solid #3498db;
    }

    .alert-box {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
        color: #856404;
    }

    .project-tech {
        margin-bottom: 30px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .tech-tag {
        background: linear-gradient(135deg, #e74c3c, #c0392b);
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 600;
        box-shadow: 0 2px 5px rgba(231, 76, 60, 0.2);
    }

    /* Objectives Grid */
    .objectives-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 25px 0;
    }

    .objective-card {
        background: white;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        border-top: 4px solid #e74c3c;
        text-align: center;
        transition: transform 0.3s ease;
    }

    .objective-card:hover {
        transform: translateY(-5px);
    }

    .objective-icon {
        font-size: 2.5em;
        margin-bottom: 15px;
    }

    .objective-card h4 {
        color: #2c3e50;
        margin: 10px 0;
    }

    /* Dataset Info */
    .dataset-info {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 25px;
        margin: 20px 0;
    }

    .dataset-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }

    .stat-item {
        background: white;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #3498db;
    }

    .stat-label {
        display: block;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 5px;
        font-size: 0.9em;
    }

    .stat-value {
        color: #7f8c8d;
        font-size: 0.95em;
    }

    /* Methodology */
    .methodology-timeline {
        margin: 25px 0;
    }

    .phase {
        margin-bottom: 30px;
        position: relative;
        padding-left: 30px;
    }

    .phase:before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: #e74c3c;
    }

    .phase-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
    }

    .phase-number {
        background: #e74c3c;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 15px;
    }

    .phase-content {
        padding-left: 20px;
    }

    .method-item {
        background: white;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 8px;
        border-left: 4px solid #3498db;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    /* Results Table */
    .results-table {
        overflow-x: auto;
        margin: 25px 0;
    }

    .results-table table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }

    .results-table th {
        background: #2c3e50;
        color: white;
        padding: 15px;
        text-align: left;
        font-weight: 600;
    }

    .results-table td {
        padding: 15px;
        border-bottom: 1px solid #eee;
    }

    .bad-result {
        color: #e74c3c;
        font-weight: bold;
    }

    .good-result {
        color: #27ae60;
        font-weight: bold;
    }

    /* Visualization */
    .visualization {
        background: white;
        border-radius: 10px;
        padding: 25px;
        margin: 25px 0;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }

    .viz-item {
        margin-bottom: 20px;
    }

    .viz-title {
        font-weight: bold;
        margin-bottom: 15px;
        color: #2c3e50;
    }

    .viz-bar {
        height: 40px;
        background: #ecf0f1;
        border-radius: 20px;
        position: relative;
        margin: 20px 0;
    }

    .bar-segment {
        height: 100%;
        border-radius: 20px;
        position: absolute;
        top: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
    }

    .bar-segment.baseline {
        background: #e74c3c;
        z-index: 1;
    }

    .bar-segment.reweight {
        background: #f39c12;
        z-index: 2;
    }

    .bar-segment.threshold {
        background: #27ae60;
        z-index: 3;
    }

    .fairness-line {
        position: absolute;
        top: -10px;
        height: 60px;
        width: 3px;
        background: #2c3e50;
    }

    .fairness-line span {
        position: absolute;
        top: -25px;
        left: 50%;
        transform: translateX(-50%);
        white-space: nowrap;
        color: #2c3e50;
        font-size: 0.8em;
    }

    /* Implementation Guide */
    .implementation-guide {
        margin: 25px 0;
    }

    .step {
        display: flex;
        margin-bottom: 25px;
        align-items: flex-start;
    }

    .step-number {
        background: #3498db;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 20px;
        flex-shrink: 0;
    }

    .step-content {
        flex-grow: 1;
    }

    .step-content pre {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 10px 0;
    }

    .step-content code {
        font-family: 'Consolas', 'Monaco', monospace;
    }

    /* Recommendations */
    .recommendations {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 25px 0;
    }

    .recommendation-card {
        background: white;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        display: flex;
        align-items: flex-start;
    }

    .rec-icon {
        font-size: 2em;
        margin-right: 15px;
        color: #3498db;
    }

    .rec-content h4 {
        margin: 0 0 10px 0;
        color: #2c3e50;
    }

    /* Links */
    .project-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        flex-wrap: wrap;
    }

    .project-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: #e74c3c;
        color: white;
        padding: 12px 24px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(231, 76, 60, 0.2);
    }

    .project-link:hover {
        background: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
    }

    .project-link.secondary {
        background: #3498db;
        box-shadow: 0 2px 5px rgba(52, 152, 219, 0.2);
    }

    .project-link.secondary:hover {
        background: #2980b9;
        box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
    }

    .project-link i {
        font-size: 1.1em;
    }

    @media (max-width: 768px) {
        .objectives-grid,
        .dataset-stats,
        .recommendations {
            grid-template-columns: 1fr;
        }
        
        .project-links {
            flex-direction: column;
            align-items: center;
        }
        
        .project-link {
            width: 100%;
            max-width: 300px;
            justify-content: center;
        }
        
        .phase {
            padding-left: 20px;
        }
        
        .phase:before {
            left: 5px;
        }
    }

    @media (max-width: 480px) {
        .project-detail-section {
            padding: 15px;
        }
        
        .results-table {
            font-size: 0.9em;
        }
        
        .viz-bar {
            height: 30px;
        }
        
        .fairness-line span {
            font-size: 0.7em;
        }
    }
</style>
{% endblock %}